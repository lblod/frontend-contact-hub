<EditCard @containsRequiredFields={{true}}>
  <:title>Heeft relatie met</:title>
  <:card as |Card|>
    <Card.Columns>
      <:left as |Item|>
        <Item
          @labelFor="related-gemeente"
          @required={{false}}
          @errorMessage={{@model.administrativeUnit.error.isSubOrganizationOf.validation}}
        >
          <:label>Gemeente</:label>
          <:content as |hasError|>
            <MunicipalitySelect
              @selected={{@model.administrativeUnit.isSubOrganizationOf}}
              @onChange={{@updateRelatedOrg}}
              @error={{hasError}}
              @id="related-gemeente"
            />
          </:content>
        </Item>
        <Item @labelFor="related-municipality">
          <:label>Provincie</:label>
          <:content>
            {{@model.administrativeUnit.isSubOrganizationOf.isSubOrganizationOf.name}}
          </:content>
        </Item>
      </:left>
    </Card.Columns>
  </:card>
</EditCard>

{{#if @model.clonedRelatedOrganizations.length}}
  <div>
    <AuDataTable id="relatedMemberships" @content={{@model.relatedMemberships}}
      @noDataMessage="Geen bestuur" as |t|>
      <t.content as |c|>
        <c.header>
          <th>Type relatie</th>
          <th>Type organisatie</th>
          <th>Organisatie</th>
          <th>Status</th>
        </c.header>
        <c.body as |membership|>
          <td>
            {{membership.role.opLabel}}
          </td>
          <td>
            {{membership.member.classification.label}}
          </td>
          <td>
            <AuLink @route="administrative-units.administrative-unit" @model={{membership.member.id}}>
              {{membership.member.name}}
            </AuLink>
          </td>
          <td>
            <OrganizationStatus @id={{membership.member.organizationStatus.id}}
              @label={{membership.member.organizationStatus.label}} />
          </td>
        </c.body>
      </t.content>
    </AuDataTable>
  </div>
{{/if}}
